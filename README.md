# 多AI对话聚合器

一个Chrome浏览器插件，让你能够在一个标签页内同时显示多个网站（AI聊天、文档、工具等），并支持统一输入功能。

**版本**: 1.0.0 | **更新**: 2025-10-15

## ✨ 核心特性

### 🌐 从标签页选择并分屏（✨ 推荐）
**完全灵活**：无硬编码，选择任意网站！

- **从已打开的标签页动态选择**网站（不限于AI）
- **真正在一个标签页内**并排显示（使用iframe）
- **保持登录状态**，Cookie和Session完整保留
- **统一输入框**，一键发送到所有AI（需配置选择器）
- **实时对比**，无需切换标签页
- **支持多种布局**：2列、3列、4宫格
- **使用declarativeNetRequest API**移除X-Frame-Options限制

### 🎯 可视化配置选择器
**无需手写代码**：点点鼠标就能配置！

- 三步向导式配置流程
- 可视化选择输入框和发送按钮
- 自动生成CSS选择器
- 配置一次，永久使用
- 支持任意网站（不限于AI）

### 🖥️ 窗口管理器（备选方案）
- 从已打开的标签页中选择
- 使用Chrome原生窗口API排列窗口
- 完美保持登录状态
- 适合无法使用iframe的特殊网站

### 其他功能
- ⚡ **Enter键发送** - 发送后自动清空
- 🔄 **实时刷新** - 随时更新标签页列表
- 📊 **空状态引导** - 友好的用户体验
- 💾 **配置持久化** - 自动保存所有配置

## 📦 安装方法

### 开发者模式加载（推荐）

1. 克隆或下载本项目到本地
2. 打开Chrome浏览器，进入 `chrome://extensions/`
3. 开启右上角的"开发者模式"
4. 点击"加载已解压的扩展程序"
5. 选择本项目的文件夹
6. 插件安装完成！

## 🎮 使用方法

### 方式1：分屏视图（✨ 推荐）

**真正在一个标签页内显示所有AI！**

1. **点击插件图标**

2. **选择"🌐 分屏视图"**

3. **等待加载**
   - ChatGPT、Gemini、Claude等AI会在iframe中加载
   - 首次可能需要登录（只需一次）

4. **选择布局**
   - 在顶部选择你想要的布局
   - 2列横向、3列、4宫格等

5. **输入问题**
   - 在顶部统一输入框输入你的问题
   - 点击"⚡ 发送"

6. **对比回答**
   - 所有AI的回答在同一页面并排显示
   - 无需切换标签页，一目了然！

### 技术原理

**为什么窗口分屏管理器是最佳方案？**

| 对比项 | iframe方案 ❌ | 窗口管理器方案 ✅ |
|--------|-------------|----------------|
| 加载限制 | 大部分网站禁止iframe | 无限制 |
| 登录状态 | 丢失，需重新登录 | 完美保持 |
| Cookie/Session | 不共享，独立会话 | 正常使用 |
| 灵活性 | 只能预设网站 | 任意标签页 |
| 用户体验 | 差，很多限制 | 原生体验 |

**实现原理**：

```javascript
// 使用Chrome的窗口管理API
chrome.windows.create({
  tabId: selectedTabId,  // 移动已有标签页
  left: x,               // 窗口位置
  top: y,
  width: w,              // 窗口大小
  height: h
});
```

不是创建新窗口加载网站，而是**移动已打开的标签页到新窗口并调整窗口位置**，所以登录状态完全保留！

## 📁 项目结构

```
多窗口插件/
├── manifest.json              # Chrome扩展配置
├── background.js              # 后台服务
├── window-manager/            # 窗口分屏管理器（核心功能）⭐
│   ├── window-manager.html
│   ├── window-manager.css
│   └── window-manager.js
├── popup/                     # 弹出窗口
│   ├── popup.html
│   ├── popup.css
│   └── popup.js
├── main/                      # 主控制面板
│   ├── main.html
│   ├── main.css
│   └── main.js
├── split-view/                # 分屏视图（iframe方式，受限）
│   ├── split-view.html
│   ├── split-view.css
│   └── split-view.js
├── content-scripts/           # 内容脚本
│   └── injector.js
└── icons/                     # 图标
    ├── icon16.png
    ├── icon48.png
    └── icon128.png
```

## 🔧 核心技术

- **Chrome Extension Manifest V3**
- **chrome.windows API** - 窗口管理
- **chrome.tabs API** - 标签页操作
- **chrome.system.display API** - 获取屏幕信息
- **chrome.storage API** - 配置持久化
- **纯原生JavaScript** - 无外部依赖

## ⚙️ 使用场景

1. **AI回答对比**: 同一问题问不同AI，并排对比答案
2. **提示词测试**: 测试提示词在不同AI上的效果
3. **多任务处理**: 同时操作多个网站
4. **文档对比**: 并排查看多个文档
5. **开发调试**: 同时查看多个环境

## 💡 使用技巧

### 技巧1: 快速设置常用布局

1. 打开常用的AI网站并登录
2. 使用窗口管理器应用分屏
3. 点击"保存布局"
4. 下次直接在"已保存的布局"中点击"应用"

### 技巧2: 统一发送问题

分屏后，在窗口管理器的"统一输入"框输入问题，应用分屏时会自动发送到所有窗口。

### 技巧3: 恢复原始窗口

使用分屏后，点击"恢复窗口"可以将所有窗口恢复到原始状态。

## ⚠️ 常见问题

### Q: 为什么不直接用iframe？
A: 大部分网站（包括所有主流AI网站）都设置了X-Frame-Options安全策略，禁止在iframe中加载。即使能加载，也会丢失登录状态。

### Q: 窗口管理器和分屏视图有什么区别？
A: 
- **窗口管理器**：使用Chrome原生API控制窗口位置，保持登录状态 ✅ 推荐
- **分屏视图**：使用iframe嵌入，大部分网站无法加载 ❌ 不推荐

### Q: 可以分屏任意网站吗？
A: 是的！窗口管理器支持任意已打开的标签页，不限于AI网站。

### Q: 分屏后如何调整窗口大小？
A: 可以手动拖动调整，也可以点击"恢复窗口"后重新应用不同的布局。

### Q: 保存的布局在哪里？
A: 保存在chrome.storage.local中，只在本地存储，不会同步到其他设备。

## 🚀 未来计划

- [x] ~~基于Chrome窗口API的真正分屏~~ ✅ 已完成
- [ ] 支持自定义窗口大小和位置
- [ ] 支持拖拽调整分屏比例
- [ ] 添加快捷键支持
- [ ] 支持多显示器场景
- [ ] 布局模板市场

## 🎯 与竞品对比

| 功能 | 本插件 | Split Screen Pro | Tab Resize |
|------|--------|-----------------|-----------|
| 真正的分屏 | ✅ | ✅ | ✅ |
| 保持登录状态 | ✅ | ✅ | ✅ |
| 从已打开标签页选择 | ✅ | ❌ | ✅ |
| AI专用优化 | ✅ | ❌ | ❌ |
| 统一输入发送 | ✅ | ❌ | ❌ |
| 保存布局 | ✅ | ✅ | ✅ |
| 开源免费 | ✅ | ❌ | ❌ |

## 📄 许可证

MIT License

## 🙏 致谢

- 感谢Split Screen Pro提供的设计灵感
- 感谢Chrome Extension API文档
- 感谢所有AI工具的开发者

---

**享受与多个AI同时对话的乐趣！** 🎉
