# 开发工具说明

本目录包含**仅供开发使用**的工具，不会影响用户的正常使用。

## ⚠️ 重要说明

这些工具：
- ✅ 仅用于开发和维护
- ✅ 不集成到扩展主程序中
- ✅ 用户不会看到这些功能
- ✅ 不影响插件的稳定性

---

## 🛠️ 可用工具

### 1. config-generator.js - 单个网站配置生成器

**用途**：在AI网站的控制台中运行，自动检测并生成配置

**使用方法**：
```bash
1. 访问AI网站（如 https://chat.deepseek.com）
2. F12 → Console
3. 复制 config-generator.js 全部内容
4. 粘贴到控制台，按回车
5. 复制生成的配置代码
6. 添加到 default-configs.js
```

**状态**：✅ 完全可用

---

### 2. batch-config-generator.js - 批量配置生成器脚本

**用途**：批量检测多个AI网站的配置

**使用方法**：参考下方的 batch-generator-extension.html

**状态**：✅ 已修复（使用 files 参数注入）

---

### 3. batch-generator-extension.html - 批量生成器界面

**用途**：提供可视化界面，批量生成所有AI网站的配置

**使用方法**：
```bash
1. Chrome → chrome://extensions/
2. 重新加载扩展
3. 在地址栏输入：
   chrome-extension://[扩展ID]/tools/batch-generator-extension.html
   
   或者：右键文件 → 复制路径 → 在新标签页打开
   
4. 点击"开始批量生成"
5. 等待1-2分钟
6. 复制生成的配置代码
7. 粘贴到 default-configs.js
```

**获取扩展ID**：
```
Chrome → chrome://extensions/
找到"多AI对话聚合器"
点击"详细信息"
可以看到ID
```

**状态**：✅ 已修复，可以在扩展环境中运行

---

### 4. detector.js - 配置检测核心脚本

**用途**：被 batch-config-generator.js 注入到网页中执行检测

**使用方法**：不需要直接使用，由批量生成器自动调用

**状态**：✅ 已创建

---

## 📝 开发工作流

### 首次设置预设配置

```bash
1. 打开 batch-generator-extension.html
2. 运行批量生成
3. 复制生成的配置代码
4. 粘贴到 default-configs.js
5. 测试验证
6. 完成
```

### 添加新AI网站

```bash
方法1（单个）：
1. 访问新网站
2. 运行 config-generator.js
3. 添加到 default-configs.js

方法2（批量）：
1. 编辑 batch-config-generator.js
2. 在 AI_SITES 数组中添加新网站
3. 重新运行批量生成器
```

### 更新现有配置

```bash
1. 运行批量生成器
2. 对比新旧配置
3. 更新变化的配置
4. 测试验证
```

---

## 🚫 不要做的事

1. ❌ 不要将这些工具集成到主程序
2. ❌ 不要在 popup 或主界面中添加入口
3. ❌ 不要让用户看到这些开发工具
4. ❌ 不要在 manifest.json 中暴露这些页面

**原因**：
- 这些是开发工具，不是用户功能
- 可能引起用户困惑
- 增加维护负担
- 影响插件简洁性

---

## ✅ 可以做的事

1. ✅ 在开发时使用这些工具
2. ✅ 用于生成和更新预设配置
3. ✅ 用于调试和验证配置
4. ✅ 在文档中说明如何使用（仅供开发者）

---

## 📊 工具状态总结

| 工具 | 状态 | 用途 | 集成到主程序 |
|-----|------|------|------------|
| config-generator.js | ✅ 可用 | 单个网站检测 | ❌ 否 |
| batch-config-generator.js | ✅ 已修复 | 批量生成脚本 | ❌ 否 |
| batch-generator-extension.html | ✅ 已修复 | 可视化界面 | ❌ 否 |
| detector.js | ✅ 可用 | 检测核心逻辑 | ❌ 否 |

---

## 🎯 给未来维护者的建议

### 何时使用这些工具？

1. **首次设置** - 使用批量生成器一次性生成所有配置
2. **网站改版** - 重新运行批量生成器更新配置
3. **新增网站** - 使用单个生成器或批量生成器
4. **用户反馈配置失效** - 重新检测该网站

### 如何保持工具更新？

1. 如果检测算法需要改进，更新 `detector.js`
2. 如果需要支持新的网站类型，更新评分逻辑
3. 定期（每季度）运行批量生成器，验证配置是否还有效

### 工具的局限性

1. **需要登录的网站** - 可能检测失败，需要先登录
2. **动态加载的元素** - 可能需要调整 waitTime
3. **特殊UI框架** - 可能需要手动配置

---

## 📞 问题反馈

如果工具有问题：
1. 检查控制台错误信息
2. 查看是否需要登录
3. 尝试增加 waitTime
4. 使用单个生成器手动检测

---

**最后更新**：2025-01-19  
**维护者**：开发团队



